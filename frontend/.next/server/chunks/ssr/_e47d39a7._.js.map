{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../lib/api.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","export function getBackendUrl() {\n  return process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:8000\";\n}\n\nexport class APIError extends Error {\n  constructor(message, status, data) {\n    super(message);\n    this.name = \"APIError\";\n    this.status = status;\n    this.data = data;\n  }\n}\n\nexport async function fetchWithRetry(url, options = {}, retries = 3, delay = 1000) {\n  for (let i = 0; i < retries; i++) {\n    try {\n      const response = await fetch(url, {\n        ...options,\n        headers: {\n          ...options.headers,\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new APIError(\n          errorData.message || `HTTP ${response.status}: ${response.statusText}`,\n          response.status,\n          errorData\n        );\n      }\n\n      return await response.json();\n    } catch (error) {\n      if (i === retries - 1) throw error;\n      if (error instanceof APIError && error.status < 500) throw error;\n      \n      await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\n    }\n  }\n}\n\nexport async function uploadFile(file, prompt = \"\", onProgress = null) {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n  if (prompt.trim()) {\n    formData.append(\"prompt\", prompt);\n  }\n\n  const xhr = new XMLHttpRequest();\n  \n  return new Promise((resolve, reject) => {\n    if (onProgress) {\n      xhr.upload.addEventListener(\"progress\", (e) => {\n        if (e.lengthComputable) {\n          const percentComplete = (e.loaded / e.total) * 100;\n          onProgress(percentComplete);\n        }\n      });\n    }\n\n    xhr.addEventListener(\"load\", () => {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        try {\n          resolve(JSON.parse(xhr.responseText));\n        } catch (e) {\n          reject(new APIError(\"Invalid JSON response\", xhr.status));\n        }\n      } else {\n        reject(new APIError(`Upload failed: ${xhr.statusText}`, xhr.status));\n      }\n    });\n\n    xhr.addEventListener(\"error\", () => {\n      reject(new APIError(\"Network error during upload\", 0));\n    });\n\n    xhr.addEventListener(\"abort\", () => {\n      reject(new APIError(\"Upload cancelled\", 0));\n    });\n\n    xhr.open(\"POST\", `${getBackendUrl()}/analyze`);\n    xhr.send(formData);\n  });\n}\n\nexport function validateFile(file) {\n  const validTypes = [\n    \"text/csv\",\n    \"application/vnd.ms-excel\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n  ];\n  const validExtensions = [\".csv\", \".xlsx\", \".xls\"];\n  const maxSize = 50 * 1024 * 1024; // 50MB\n\n  if (file.size > maxSize) {\n    throw new Error(\"File size exceeds 50MB limit\");\n  }\n\n  const isValidType = validTypes.includes(file.type) || \n    validExtensions.some(ext => file.name.toLowerCase().endsWith(ext));\n\n  if (!isValidType) {\n    throw new Error(\"Please upload a CSV or Excel file (.csv, .xlsx, .xls)\");\n  }\n\n  return true;\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient","ReactDOM"],"mappings":"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","ignoreList":[0,1,2]}