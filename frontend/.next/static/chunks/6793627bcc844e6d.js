(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4581,e=>{"use strict";var t=e.i(47167);function s(){return t.default.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000"}class a extends Error{constructor(e,t,s){super(e),this.name="APIError",this.status=t,this.data=s}}async function r(e,t={},s=3,n=1e3){for(let r=0;r<s;r++)try{let s=await fetch(e,{...t,headers:{...t.headers}});if(!s.ok){let e=await s.json().catch(()=>({}));throw new a(e.message||`HTTP ${s.status}: ${s.statusText}`,s.status,e)}return await s.json()}catch(e){if(r===s-1||e instanceof a&&e.status<500)throw e;await new Promise(e=>setTimeout(e,n*Math.pow(2,r)))}}async function n(e,t="",r=null){let o=new FormData;o.append("file",e),t.trim()&&o.append("prompt",t);let i=new XMLHttpRequest;return new Promise((e,t)=>{r&&i.upload.addEventListener("progress",e=>{e.lengthComputable&&r(e.loaded/e.total*100)}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{e(JSON.parse(i.responseText))}catch(e){t(new a("Invalid JSON response",i.status))}else t(new a(`Upload failed: ${i.statusText}`,i.status))}),i.addEventListener("error",()=>{t(new a("Network error during upload",0))}),i.addEventListener("abort",()=>{t(new a("Upload cancelled",0))}),i.open("POST",`${s()}/analyze`),i.send(o)})}function o(e){if(e.size>0x3200000)throw Error("File size exceeds 50MB limit");if(!(["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(e.type)||[".csv",".xlsx",".xls"].some(t=>e.name.toLowerCase().endsWith(t))))throw Error("Please upload a CSV or Excel file (.csv, .xlsx, .xls)");return!0}e.s(["APIError",()=>a,"fetchWithRetry",()=>r,"getBackendUrl",()=>s,"uploadFile",()=>n,"validateFile",()=>o])}]);