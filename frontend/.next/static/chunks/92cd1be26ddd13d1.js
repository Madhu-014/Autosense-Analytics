(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},4581,e=>{"use strict";var t=e.i(47167);function s(){return t.default.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000"}class r extends Error{constructor(e,t,s){super(e),this.name="APIError",this.status=t,this.data=s}}async function a(e,t={},s=3,n=1e3){for(let a=0;a<s;a++)try{let s=await fetch(e,{...t,headers:{...t.headers}});if(!s.ok){let e=await s.json().catch(()=>({}));throw new r(e.message||`HTTP ${s.status}: ${s.statusText}`,s.status,e)}return await s.json()}catch(e){if(a===s-1||e instanceof r&&e.status<500)throw e;await new Promise(e=>setTimeout(e,n*Math.pow(2,a)))}}async function n(e,t="",a=null){let o=new FormData;o.append("file",e),t.trim()&&o.append("prompt",t);let i=new XMLHttpRequest;return new Promise((e,t)=>{a&&i.upload.addEventListener("progress",e=>{e.lengthComputable&&a(e.loaded/e.total*100)}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{e(JSON.parse(i.responseText))}catch(e){t(new r("Invalid JSON response",i.status))}else t(new r(`Upload failed: ${i.statusText}`,i.status))}),i.addEventListener("error",()=>{t(new r("Network error during upload",0))}),i.addEventListener("abort",()=>{t(new r("Upload cancelled",0))}),i.open("POST",`${s()}/analyze`),i.send(o)})}function o(e){if(e.size>0x3200000)throw Error("File size exceeds 50MB limit");if(!(["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(e.type)||[".csv",".xlsx",".xls"].some(t=>e.name.toLowerCase().endsWith(t))))throw Error("Please upload a CSV or Excel file (.csv, .xlsx, .xls)");return!0}e.s(["APIError",()=>r,"fetchWithRetry",()=>a,"getBackendUrl",()=>s,"uploadFile",()=>n,"validateFile",()=>o])}]);